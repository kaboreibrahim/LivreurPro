{% extends "base.html" %}
{% load static %}

{% block title %}Paramètres - {{ artisan.nom_entreprise }}{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-4xl mx-auto">
        
        <!-- Header -->
        <div class="mb-8">
            <a href="{% url 'Client:profile' %}" class="inline-flex items-center text-primary hover:text-primary/80 transition-colors mb-4">
                <i class="ri-arrow-left-line mr-2"></i>
                Retour au profil
            </a>
            <h1 class="text-3xl font-bold text-gray-900">Paramètres du compte</h1>
            <p class="text-gray-600 mt-2">Gérez vos préférences et paramètres de compte</p>
        </div>

        <!-- Informations du compte -->
        <div class="bg-white rounded-xl shadow-md p-6 mb-6">
            <h2 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                <i class="ri-user-settings-line text-primary mr-2"></i>
                Informations du compte
            </h2>
            
            <div class="space-y-4">
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4">
                            <i class="ri-user-line text-blue-600 text-xl"></i>
                        </div>
                        <div>
                            <p class="font-medium text-gray-900">Informations personnelles</p>
                            <p class="text-sm text-gray-600">Nom, email, téléphone</p>
                        </div>
                    </div>
                    <a href="{% url 'artisan_edit_profile' %}" class="px-4 py-2 text-primary border border-primary rounded-lg hover:bg-primary hover:text-white transition-all">
                        Modifier
                    </a>
                </div>
                
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mr-4">
                            <i class="ri-lock-password-line text-orange-600 text-xl"></i>
                        </div>
                        <div>
                            <p class="font-medium text-gray-900">Mot de passe</p>
                            <p class="text-sm text-gray-600">Modifié il y a {{ user.last_login|timesince }}</p>
                        </div>
                    </div>
                    <a href="{% url 'artisan_change_password' %}" class="px-4 py-2 text-primary border border-primary rounded-lg hover:bg-primary hover:text-white transition-all">
                        Changer
                    </a>
                </div>
            </div>
        </div>

        <!-- Gestion de la boutique -->
        <div class="bg-white rounded-xl shadow-md p-6 mb-6">
            <h2 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                <i class="ri-store-2-line text-primary mr-2"></i>
                Gestion de la boutique
            </h2>
            
            <div class="space-y-4">
                <div class="p-4 bg-gray-50 rounded-lg">
                    <div class="flex items-start justify-between">
                        <div class="flex items-start">
                            <div class="w-12 h-12 {% if artisan.boutique_active %}bg-green-100{% else %}bg-red-100{% endif %} rounded-full flex items-center justify-center mr-4 flex-shrink-0">
                                <i class="ri-store-{% if artisan.boutique_active %}2{% else %}3{% endif %}-line {% if artisan.boutique_active %}text-green-600{% else %}text-red-600{% endif %} text-xl"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium text-gray-900">Statut de la boutique</p>
                                <p class="text-sm text-gray-600 mt-1">
                                    {% if artisan.boutique_active %}
                                        Votre boutique est actuellement <span class="font-semibold text-green-600">active</span>. Les clients peuvent voir et acheter vos articles.
                                    {% else %}
                                        Votre boutique est actuellement <span class="font-semibold text-red-600">fermée</span>. Les clients ne peuvent pas voir vos articles.
                                    {% endif %}
                                </p>
                                <div class="mt-3">
                                    <p class="text-sm text-gray-700 mb-2">
                                        <i class="ri-information-line text-blue-600 mr-1"></i>
                                        {% if artisan.boutique_active %}
                                            Fermer votre boutique désactivera automatiquement tous vos articles.
                                        {% else %}
                                            Ouvrir votre boutique réactivera automatiquement vos articles précédemment actifs.
                                        {% endif %}
                                    </p>
                                </div>
                            </div>
                        </div>
                        <form method="post" action="{% url 'artisan_toggle_boutique' %}" class="ml-4 flex-shrink-0">
                            {% csrf_token %}
                            <button type="submit" class="px-4 py-2 {% if artisan.boutique_active %}bg-red-600 hover:bg-red-700{% else %}bg-green-600 hover:bg-green-700{% endif %} text-white rounded-lg transition-all shadow-md hover:shadow-lg font-medium">
                                {% if artisan.boutique_active %}
                                    <i class="ri-close-circle-line mr-1"></i>Fermer
                                {% else %}
                                    <i class="ri-checkbox-circle-line mr-1"></i>Ouvrir
                                {% endif %}
                            </button>
                        </form>
                    </div>
                </div>
                
                <div class="p-4 bg-blue-50 border border-blue-200 rounded-lg">
                    <div class="flex items-start">
                        <i class="ri-lightbulb-line text-blue-600 text-xl mt-1 mr-3 flex-shrink-0"></i>
                        <div class="text-sm text-blue-800">
                            <p class="font-medium mb-1">Conseil</p>
                            <p>Pensez à fermer votre boutique si vous partez en vacances ou si vous avez besoin de temps pour réapprovisionner votre stock.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notifications -->
        <div class="bg-white rounded-xl shadow-md p-6 mb-6">
            <h2 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                <i class="ri-notification-line text-primary mr-2"></i>
                Notifications
            </h2>
            
            <div class="space-y-4">
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                    <div class="flex items-start">
                        <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mr-4 flex-shrink-0">
                            <i class="ri-shopping-cart-line text-purple-600 text-xl"></i>
                        </div>
                        <div>
                            <p class="font-medium text-gray-900">Nouvelles commandes</p>
                            <p class="text-sm text-gray-600">Recevoir un email pour chaque nouvelle commande</p>
                        </div>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" checked class="sr-only peer">
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                    </label>
                </div>
                
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                    <div class="flex items-start">
                        <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mr-4 flex-shrink-0">
                            <i class="ri-message-line text-green-600 text-xl"></i>
                        </div>
                        <div>
                            <p class="font-medium text-gray-900">Messages clients</p>
                            <p class="text-sm text-gray-600">Être notifié des messages de vos clients</p>
                        </div>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" checked class="sr-only peer">
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                    </label>
                </div>
                
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                    <div class="flex items-start">
                        <div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mr-4 flex-shrink-0">
                            <i class="ri-star-line text-yellow-600 text-xl"></i>
                        </div>
                        <div>
                            <p class="font-medium text-gray-900">Avis et évaluations</p>
                            <p class="text-sm text-gray-600">Recevoir un email pour chaque nouvel avis</p>
                        </div>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" checked class="sr-only peer">
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                    </label>
                </div>
                
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                    <div class="flex items-start">
                        <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4 flex-shrink-0">
                            <i class="ri-information-line text-blue-600 text-xl"></i>
                        </div>
                        <div>
                            <p class="font-medium text-gray-900">Actualités et conseils</p>
                            <p class="text-sm text-gray-600">Recevoir des conseils pour améliorer vos ventes</p>
                        </div>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" class="sr-only peer">
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                    </label>
                </div>
            </div>
        </div>

        <!-- Confidentialité et sécurité -->
        <div class="bg-white rounded-xl shadow-md p-6 mb-6">
            <h2 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                <i class="ri-shield-line text-primary mr-2"></i>
                Confidentialité et sécurité
            </h2>
            
            <div class="space-y-4">
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center mr-4">
                            <i class="ri-eye-line text-indigo-600 text-xl"></i>
                        </div>
                        <div>
                            <p class="font-medium text-gray-900">Visibilité du profil</p>
                            <p class="text-sm text-gray-600">Contrôlez qui peut voir votre profil</p>
                        </div>
                    </div>
                    <i class="ri-arrow-right-s-line text-gray-400 text-xl"></i>
                </div>
                
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mr-4">
                            <i class="ri-shield-check-line text-red-600 text-xl"></i>
                        </div>
                        <div>
                            <p class="font-medium text-gray-900">Authentification à deux facteurs</p>
                            <p class="text-sm text-gray-600">Ajoutez une couche de sécurité supplémentaire</p>
                        </div>
                    </div>
                    <span class="px-3 py-1 bg-yellow-100 text-yellow-800 text-xs font-medium rounded-full">Bientôt</span>
                </div>
                
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mr-4">
                            <i class="ri-history-line text-gray-600 text-xl"></i>
                        </div>
                        <div>
                            <p class="font-medium text-gray-900">Historique de connexion</p>
                            <p class="text-sm text-gray-600">Consultez vos connexions récentes</p>
                        </div>
                    </div>
                    <i class="ri-arrow-right-s-line text-gray-400 text-xl"></i>
                </div>
            </div>
        </div>

        <!-- Support et aide -->
        <div class="bg-white rounded-xl shadow-md p-6 mb-6">
            <h2 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
                <i class="ri-customer-service-line text-primary mr-2"></i>
                Support et aide
            </h2>
            
            <div class="space-y-4">
                <a href="#" class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4">
                            <i class="ri-question-line text-blue-600 text-xl"></i>
                        </div>
                        <div>
                            <p class="font-medium text-gray-900">Centre d'aide</p>
                            <p class="text-sm text-gray-600">Trouvez des réponses à vos questions</p>
                        </div>
                    </div>
                    <i class="ri-arrow-right-s-line text-gray-400 text-xl"></i>
                </a>
                
                <a href="#" class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mr-4">
                            <i class="ri-mail-line text-green-600 text-xl"></i>
                        </div>
                        <div>
                            <p class="font-medium text-gray-900">Contacter le support</p>
                            <p class="text-sm text-gray-600">Notre équipe est là pour vous aider</p>
                        </div>
                    </div>
                    <i class="ri-arrow-right-s-line text-gray-400 text-xl"></i>
                </a>
                
                <a href="#" class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mr-4">
                            <i class="ri-feedback-line text-purple-600 text-xl"></i>
                        </div>
                        <div>
                            <p class="font-medium text-gray-900">Envoyer un feedback</p>
                            <p class="text-sm text-gray-600">Aidez-nous à améliorer la plateforme</p>
                        </div>
                    </div>
                    <i class="ri-arrow-right-s-line text-gray-400 text-xl"></i>
                </a>
            </div>
        </div>

        <!-- Zone de danger -->
        <div class="bg-white rounded-xl shadow-md border-2 border-red-200 p-6">
            <h2 class="text-xl font-bold text-red-600 mb-6 flex items-center">
                <i class="ri-error-warning-line mr-2"></i>
                Zone de danger
            </h2>
            
            <div class="space-y-4">
                <div class="p-4 bg-red-50 rounded-lg border border-red-200">
                    <div class="flex items-start justify-between">
                        <div>
                            <p class="font-medium text-gray-900 mb-2">Supprimer mon compte</p>
                            <p class="text-sm text-gray-600 mb-4">
                                Une fois votre compte supprimé, toutes vos données seront définitivement effacées. Cette action est irréversible.
                            </p>
                            <button type="button" onclick="confirmDelete()" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all font-medium">
                                <i class="ri-delete-bin-line mr-2"></i>
                                Supprimer mon compte
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Confirmation de suppression
function confirmDelete() {
    if (confirm('⚠️ ATTENTION ⚠️\n\nÊtes-vous absolument sûr de vouloir supprimer votre compte ?\n\nCette action est IRRÉVERSIBLE et entraînera :\n- La suppression de tous vos articles\n- La perte de toutes vos commandes\n- La suppression de votre boutique\n- La perte de toutes vos données\n\nTapez "SUPPRIMER" pour confirmer.')) {
        const confirmation = prompt('Tapez "SUPPRIMER" en majuscules pour confirmer la suppression :');
        if (confirmation === 'SUPPRIMER') {
            alert('Fonctionnalité de suppression en cours de développement. Veuillez contacter le support pour supprimer votre compte.');
        } else {
            alert('Suppression annulée.');
        }
    }
}
</script>
{% endblock %}